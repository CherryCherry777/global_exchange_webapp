{% extends "webapp/base.html" %}
{% load static %}
{% load custom_filters %}
{% block title %}Modify User{% endblock %}

{% block content %}
<div class="homepage-container">
    <h2>Modify User: {{ user_obj.username }}</h2>
    <form method="POST">
        {% csrf_token %}
        <label>Username:</label>
        <input type="text" name="username" value="{{ user_obj.username }}"><br><br>
        <label>Email:</label>
        <input type="email" name="email" value="{{ user_obj.email }}"><br><br>
        <label>First Name:</label>
        <input type="text" name="first_name" value="{{ user_obj.first_name }}"><br><br>
        <label>Last Name:</label>
        <input type="text" name="last_name" value="{{ user_obj.last_name }}"><br><br>

        <h3>Roles</h3>
        {% for role in roles %}
            <input type="checkbox" name="roles" value="{{ role.name }}" 
                {% if role.name in user_roles %}checked{% endif %}
                {% if ROLE_TIERS|dict_get:role.name > ROLE_TIERS|dict_get:highest_tier %}
                    disabled
                {% endif %}
            >
            {{ role.name }}<br>
        {% endfor %}

        <br>
        <button type="submit" class="add-btn">Save Changes</button>
        <a href="{% url 'confirm_delete_user' user_obj.id %}" class="header-btn">Delete User</a>
        <a href="{% url 'manage_users' %}" class="header-btn">Cancel</a>
    </form>
</div>
{% endblock %}

{% extends "webapp/base.html" %}
{% load static %}

{% block title %}Medios de Pago - {{ cliente.nombre }}{% endblock %}

{% block content %}
<div class="admin-page-container view-client-payment-methods">
    <!-- Header moderno -->
    <div class="admin-header">
        <div class="header-content">
            <div class="header-left">
                <a href="{% url 'manage_client_payment_methods' %}" class="back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Volver a Medios de Pago
                </a>
                <h1 class="page-title">Medios de Pago - {{ cliente.nombre }}</h1>
                <p class="page-subtitle">Configuración de métodos de pago para este cliente</p>
            </div>
        </div>
    </div>

    <!-- Información del cliente -->
    <div class="client-info-container">
        <div class="client-info-card">
            <div class="client-avatar-large">
                <span>{{ cliente.nombre|first|upper }}</span>
            </div>
            <div class="client-details-large">
                <h2>{{ cliente.nombre }}</h2>
                <p class="client-type">{{ cliente.get_tipoCliente_display }} - {{ cliente.categoria.nombre }}</p>
                <p class="client-email">{{ cliente.email }}</p>
                <p class="client-phone">{{ cliente.telefono }}</p>
            </div>
        </div>
    </div>

    <!-- Medios de pago del cliente -->
    <div class="payment-methods-container">
        <div class="payment-methods-card">
            <h3>Medios de Pago Configurados</h3>
            
            {% if medios_pago_cliente %}
                <div class="payment-methods-grid">
                    {% for relacion in medios_pago_cliente %}
                    <div class="payment-method-item {% if relacion.habilitado %}enabled{% else %}disabled{% endif %}">
                        <div class="payment-method-icon">
                            {% if relacion.medio_pago.tipo == 'tarjeta' %}
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                    <line x1="1" y1="10" x2="23" y2="10"/>
                                </svg>
                            {% elif relacion.medio_pago.tipo == 'billetera' %}
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/>
                                    <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/>
                                    <line x1="10" y1="12" x2="14" y2="12"/>
                                </svg>
                            {% elif relacion.medio_pago.tipo == 'efectivo' %}
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="1" x2="12" y2="23"/>
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                </svg>
                        </div>
                        <div class="payment-method-info">
                            <h4>{{ relacion.medio_pago.nombre }}</h4>
                            <p>{{ relacion.medio_pago.get_tipo_display }}</p>
                            {% if relacion.medio_pago.descripcion %}
                                <p class="description">{{ relacion.medio_pago.descripcion }}</p>
                            {% endif %}
                        </div>
                        <div class="payment-method-status">
                            {% if relacion.habilitado %}
                                <span class="status-badge enabled">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 12l2 2 4-4"/>
                                        <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
                                        <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
                                    </svg>
                                    Habilitado
                                </span>
                            {% else %}
                                <span class="status-badge disabled">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18"/>
                                        <line x1="6" y1="6" x2="18" y2="18"/>
                                    </svg>
                                    Deshabilitado
                                </span>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <div class="empty-content">
                        <div class="empty-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 12l2 2 4-4"/>
                                <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
                                <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
                            </svg>
                        </div>
                        <h3>No hay medios de pago configurados</h3>
                        <p>Este cliente no tiene medios de pago habilitados</p>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Acciones -->
    <div class="actions-container">
        <div class="actions-card">
            <a href="{% url 'manage_client_payment_methods' %}" class="modern-btn secondary-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Volver a Configuración
            </a>
            <a href="{% url 'view_cliente' cliente.id %}" class="modern-btn primary-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
                Ver Cliente
            </a>
        </div>
    </div>
</div>
{% endblock %}
